# Chapter 9

## Virtual Private Cloud (VPC) Networking

VPC - virtual data center in the cloud. Logic isolate part of AWS cloud where you define your own network. Complete control of virtual network, including your own IP address range, subnets, route tables and network gateways.

When create VPC: (10.0.0.0/16)
- It will create a Public subnet (10.0.1.0/24)
    - [Instance , Security Group] <- Network ACL <- Route Table <- Router <- Internet Gateway
- Also build a backend with Private subnet (10.0.2.0/24)
    - [Instance, Security Group] <- Network ACL <- Route Table <- Router <- Virtual Private Gateway


What we can do with VPC? 
- Launch Instances
- Custom IP address
- Route Tables
- Internet Gateway
- More Control
- Access Control Lists
- Block IP addresses using Network Access Control Lists (NACL)


Default VPC - user friendly, all subnets in default VPC have a route to the internet. Each EC2 both have a public and private address

Custom VPC - fully customizable, take time to setup

Note: when you first create a VPC by default it will create a new security group, a main network ACL, a route table.

1 subnet is always in 1 AZ

1 Internet gateway per VPC

## Use NAT Gateway for Internet Access

NAT Gateway: network address translation gateway to enable instances in private subnet to connect to the internet or other AWS services while preventing the internet from initiating a connection with those instances. 

Provision NAT Gateway in public subnet in the same AZ. NAT Gateway more than one instances that Amazon handle for you. 

5 Facts about NAT Gateway:
- Redundant inside the AZ
- Starts at 5 Gbs and scale to 45 Gbs
- No need to patch 
- Not associate with SGs
- Auto assign IP addresses


## Security Groups
Security Groups are stateful - if you send a request from your instance, the response traffic for that request is allowed to flow in regardless of inbound security group rules. Responses to allowed inbound traffic are allowed to flow out, regardless of outbound rules.